generator db {
    provider                    = "Prisma-client-py"
    recursive_type_depth        = 5
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model Ciudad {
  id          Int       @id @default(autoincrement())
  nombre      String    @map("nombre") @db.VarChar(100)
  departamento String   @map("departamento") @db.VarChar(100)
  descripcion String    @map("descripcion") @db.VarChar(250)

  // Relación con Sucursal
  sucursales    Sucursal[]

  @@map("Ciudad")
}


model Puesto {
  id              Int     @id @default(autoincrement())
  nombre          String  @map("nombre") @db.VarChar(100)
  descripcion     String  @map("descripcion") @db.VarChar(250)
  salario_horario Float

  // Relación con Usuarios
  usuarios        Usuario[]

  @@map("Puesto")
}


model Rol {
  id          Int     @id @default(autoincrement())
  nombre      String  @map("nombre") @db.VarChar(100)
  descripcion String  @map("descripcion") @db.VarChar(250)

  // Relación con usuarios
  usuarios    Usuario[]

  @@map("Rol")
}


model TipoSucursal {
  id     Int     @id @default(autoincrement())
  nombre String  @map("nombre") @db.VarChar(100)

  // Relación con Sucursal
  sucursales    Sucursal[]

  @@map("TipoSucursal")
}


model Sucursal {
  id              Int     @id @default(autoincrement())
  nombre          String  @map("nombre") @db.VarChar(100)
  direccion       String
  latitud         Float
  longitud        Float
  ciudad_id       Int
  tiposucursal_id Int

  // Relaciones
  ciudad        Ciudad  @relation(fields: [ciudad_id], references: [id])
  tipoSucursal  TipoSucursal  @relation(fields: [tiposucursal_id], references: [id])

  // Relación con Usuarios
  usuarios        Usuario[]

  @@map("Sucursal")
}


model Usuario {
  id          Int     @id @default(autoincrement())
  nombre      String  @map("nombre") @db.VarChar(100)
  username    String  @map("username") @db.VarChar(100)
  email       String  @unique
  password    String
  horas       Int
  rol_id      Int
  puesto_id   Int
  sucursal_id Int
  
  // Relaciones
  rol         Rol     @relation(fields: [rol_id], references: [id])
  puesto      Puesto @relation(fields: [puesto_id], references: [id])
  sucursal    Sucursal @relation(fields: [sucursal_id], references: [id])

  @@map("Usuario")
}